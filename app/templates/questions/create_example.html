{% extends "base.html" %}

{% block title %}Create Training Example{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('questions.train_model') }}">Model Training</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Create Example</li>
                </ol>
            </nav>
            <h1>Create Training Example from Document</h1>
            <p class="lead">Convert your generated questions into training examples for the model.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Select Document</h4>
                </div>
                <div class="card-body">
                    {% if documents %}
                        <p>Select a document with generated questions to create a training example file:</p>
                        
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Document</th>
                                        <th>Questions</th>
                                        <th>Created</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for document in documents|sort(attribute='created_at', reverse=True) %}
                                        {% if document.questions|length > 0 %}
                                            <tr>
                                                <td>{{ document.title }}</td>
                                                <td>
                                                    <span class="badge bg-success">{{ document.questions|length }} Questions</span>
                                                </td>
                                                <td>{{ document.created_at.strftime('%Y-%m-%d') }}</td>
                                                <td>
                                                    <form action="{{ url_for('questions.create_example_paper') }}" method="POST">
                                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                                        <input type="hidden" name="document_id" value="{{ document.id }}">
                                                        <button type="submit" class="btn btn-sm btn-primary">
                                                            <i class="fas fa-file-export me-1"></i> Create Example
                                                        </button>
                                                    </form>
                                                </td>
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <p class="mb-0">You don't have any documents with questions yet. <a href="{{ url_for('questions.upload_document') }}">Upload a document</a> and generate questions first.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">What This Does</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle me-2"></i>About Training Examples</h5>
                        <p>This process converts your previously generated questions into a format that can be used to fine-tune the question generation model.</p>
                    </div>
                    
                    <p>The process will:</p>
                    <ol>
                        <li>Extract all questions and answers from your document</li>
                        <li>Format them as training examples</li>
                        <li>Save them as a JSON file</li>
                        <li>Make them available for model training</li>
                    </ol>
                    
                    <p class="text-muted"><small>Note: Only documents with generated questions are shown in the list.</small></p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Alternative Options</h4>
                </div>
                <div class="card-body">
                    <p>Don't have any documents with questions yet?</p>
                    <a href="{{ url_for('questions.manual_training_examples') }}" class="btn btn-outline-primary w-100">
                        <i class="fas fa-edit me-2"></i>Create Manual Examples
                    </a>
                    <p class="mt-3 small text-muted">
                        Manual examples let you create custom training data without first generating questions from documents.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 